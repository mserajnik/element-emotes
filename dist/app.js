var CF=Object.create;var{getPrototypeOf:EF,defineProperty:jD,getOwnPropertyNames:BF}=Object;var AF=Object.prototype.hasOwnProperty;var GF=(D,u,F)=>{F=D!=null?CF(EF(D)):{};let C=u||!D||!D.__esModule?jD(F,"default",{value:D,enumerable:!0}):F;for(let E of BF(D))if(!AF.call(C,E))jD(C,E,{get:()=>D[E],enumerable:!0});return C};var W=(D,u)=>()=>(u||D((u={exports:{}}).exports,u),u.exports);var _D=W((_2,ID)=>{ID.exports=/\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFE])|\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1(?:\uD83C[\uDFFC-\uDFFF]))|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFF])|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\u2764\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFE])|\uD83C\uDFFE\u200D\u2764\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C\uDFFD\u200D\u2764\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C\uDFFC\u200D\u2764\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C\uDFFB\u200D\u2764\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1(?:\uD83C[\uDFFC-\uDFFF]))|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])\u200D\u2764\u200D\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D\u2764\u200D\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68|(?:\uD83C[\uDFFB-\uDFFF])\u200D\u2764\uFE0F\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFE])|\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83E\uDDD1(?:\uD83C[\uDFFC-\uDFFF]))|\uD83D\uDC69\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C\uDFC3|\uD83D\uDEB6|\uD83E\uDDCE)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F\u200D\u27A1\uFE0F|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83E\uDDD1\u200D\uD83E\uDDD1\u200D\uD83E\uDDD2\u200D\uD83E\uDDD2|\uD83D\uDC69(?:\u200D(?:\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\u2764\u200D\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69]))|\uD83C\uDFFF\u200D(?:(?:\uD83D\uDC30|\uD83E\uDEEF)\u200D\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFE])|\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFE]))|\uD83C\uDFFE\u200D(?:(?:\uD83D\uDC30|\uD83E\uDEEF)\u200D\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFD\uDFFF]))|\uD83C\uDFFD\u200D(?:(?:\uD83D\uDC30|\uD83E\uDEEF)\u200D\uD83D\uDC69(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]))|\uD83C\uDFFC\u200D(?:(?:\uD83D\uDC30|\uD83E\uDEEF)\u200D\uD83D\uDC69(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFD-\uDFFF]))|\uD83C\uDFFB\u200D(?:(?:\uD83D\uDC30|\uD83E\uDEEF)\u200D\uD83D\uDC69(?:\uD83C[\uDFFC-\uDFFF])|\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFC-\uDFFF])|(?:\uD83E[\uDDAF\uDDBC\uDDBD])\u200D\u27A1\uFE0F|\u2764\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFF]))|(?:\uD83C\uDFFF\u200D(?:\uD83E[\uDDAF\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E[\uDDAF\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E[\uDDAF\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E[\uDDAF\uDDBC\uDDBD]))\u200D\u27A1\uFE0F|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFF]))|\uD83D\uDC68\u200D\u2764\u200D\uD83D\uDC8B\u200D\uD83D\uDC68|\uD83D\uDC68\u200D(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D(?:\u2764|\uD83D\uDC30|\uD83E\uDEEF)\u200D\uD83E\uDDD1|\uD83D\uDC68\uD83C\uDFFF\u200D(?:\uD83D\uDC30|\uD83E[\uDD1D\uDEEF])\u200D\uD83D\uDC68)(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D(?:\u2764|\uD83D\uDC30|\uD83E\uDEEF)\u200D\uD83E\uDDD1|\uD83D\uDC68\uD83C\uDFFE\u200D(?:\uD83D\uDC30|\uD83E[\uDD1D\uDEEF])\u200D\uD83D\uDC68)(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D(?:\u2764|\uD83D\uDC30|\uD83E\uDEEF)\u200D\uD83E\uDDD1|\uD83D\uDC68\uD83C\uDFFD\u200D(?:\uD83D\uDC30|\uD83E[\uDD1D\uDEEF])\u200D\uD83D\uDC68)(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D(?:\u2764|\uD83D\uDC30|\uD83E\uDEEF)\u200D\uD83E\uDDD1|\uD83D\uDC68\uD83C\uDFFC\u200D(?:\uD83D\uDC30|\uD83E[\uDD1D\uDEEF])\u200D\uD83D\uDC68)(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])\u200D\u2764\u200D\uD83D\uDC68)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D(?:\u2764|\uD83D\uDC30|\uD83E\uDEEF)\u200D\uD83E\uDDD1|\uD83D\uDC68\uD83C\uDFFB\u200D(?:\uD83D\uDC30|\uD83E[\uDD1D\uDEEF])\u200D\uD83D\uDC68)(?:\uD83C[\uDFFC-\uDFFF])|(?:\uD83E\uDDD1(?:\uD83C\uDFFF\u200D(?:\uD83E[\uDDAF\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E[\uDDAF\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E[\uDDAF\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E[\uDDAF\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E[\uDDAF\uDDBC\uDDBD]))|\uD83D\uDC68(?:\uD83C\uDFFF\u200D(?:\uD83E[\uDDAF\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E[\uDDAF\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E[\uDDAF\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E[\uDDAF\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E[\uDDAF\uDDBC\uDDBD]))|(?:\uD83C\uDFC3|\uD83D\uDEB6|\uD83E\uDDCE)\u200D[\u2640\u2642]\uFE0F)\u200D\u27A1\uFE0F|(?:\uD83C\uDFC3|\uD83D\uDEB6|\uD83E\uDDCE)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F\u200D\u27A1|(?:\uD83C\uDFC3|\uD83D\uDEB6|\uD83E\uDDCE)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\u200D\u27A1\uFE0F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D\uD83D\uDC68|(?:\uD83E[\uDDAF\uDDBC\uDDBD])\u200D\u27A1\uFE0F)|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83E[\uDDAF\uDDBC\uDDBD])\u200D\u27A1)|\uD83D\uDC69\u200D\u2764\uFE0F\u200D(?:\uD83D[\uDC68\uDC69])|(?:\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF]))\u200D(?:\uD83E[\uDDAF\uDDBC\uDDBD])\u200D\u27A1|(?:\uD83E\uDDD1\u200D(?:\uD83E[\uDDAF\uDDBC\uDDBD])|\uD83D\uDC69\u200D(?:\uD83E[\uDDAF\uDDBC\uDDBD]))\u200D\u27A1\uFE0F|(?:\uD83C\uDFC3|\uD83D\uDEB6|\uD83E\uDDCE)(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642]\uFE0F)\u200D\u27A1|(?:\uD83C\uDFC3|\uD83D\uDEB6|\uD83E\uDDCE)\u200D[\u2640\u2642]\u200D\u27A1\uFE0F|\uD83E\uDDD1\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|(?:\uD83E[\uDDD1\uDDD2])\u200D\uD83E\uDDD2)|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC68(?:\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\u2764\u200D\uD83D\uDC68|(?:\uD83E[\uDDAF\uDDBC\uDDBD])\u200D\u27A1|(?:\uD83D[\uDC67-\uDC69])\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]\uFE0F)|\uD83E\uDEF1(?:\uD83C\uDFFF\u200D\uD83E\uDEF2(?:\uD83C[\uDFFB-\uDFFE])|\uD83C\uDFFE\u200D\uD83E\uDEF2(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C\uDFFD\u200D\uD83E\uDEF2(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C\uDFFC\u200D\uD83E\uDEF2(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C\uDFFB\u200D\uD83E\uDEF2(?:\uD83C[\uDFFC-\uDFFF]))|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83C\uDFF3\uFE0F\u200D\u26A7|(?:\uD83C[\uDFC4\uDFCA]|\uD83D[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C\uDFC3|\uD83D\uDEB6|\uD83E\uDDCE)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642\u27A1])\uFE0F|\uD83D\uDC69\u200D\u2764\u200D(?:\uD83D[\uDC68\uDC69])|(?:\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF]))\u200D[\u2695\u2696\u2708]\uFE0F|(?:\uD83E\uDDD1\u200D(?:\uD83E[\uDDAF\uDDBC\uDDBD])|\uD83D\uDC69\u200D(?:\uD83E[\uDDAF\uDDBC\uDDBD])|(?:\uD83C\uDFC3|\uD83D\uDEB6|\uD83E\uDDCE)\u200D[\u2640\u2642])\u200D\u27A1|\uD83D\uDC69\u200D(?:\uD83D[\uDC67\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|(?:\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83D\uDC41\u200D\uD83D\uDDE8|\uD83D\uDE42\u200D[\u2194\u2195]|\uD83D\uDC3B\u200D\u2744|\uD83C\uDFF4\u200D\u2620|\uD83C\uDFF3\u200D\u26A7|\uD83E\uDDD1\u200D[\u2695\u2696\u2708]|(?:\uD83C[\uDFC4\uDFCA]|\uD83D[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\u200D[\u2640\u2642]|(?:\uD83D[\uDC68\uDC69])\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFF3\uFE0F\u200D(?:\u26A7|\uD83C\uDF08)|\u26D3\uFE0F\u200D\uD83D\uDCA5|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:[\u2695\u2696\u2708]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD\uDE70])|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|(?:\uD83C[\uDFC4\uDFCA]|\uD83D[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:[\u2695\u2696\u2708]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFC3|\uD83D\uDEB6|\uD83E\uDDCE)(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642\u27A1]|\u200D[\u2640\u2642\u27A1]\uFE0F)|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC41\u200D\uD83D\uDDE8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83C\uDF4B\u200D\uD83D\uDFE9|\uD83C\uDF44\u200D\uD83D\uDFEB|\uD83D\uDE42\u200D[\u2194\u2195]|\uD83D\uDC3B\u200D\u2744|\uD83D\uDC26\u200D(?:\u2B1B|\uD83D\uDD25)|\uD83D\uDC08\u200D\u2B1B|\uD83C\uDFF4\u200D\u2620|\uD83C\uDFF3\u200D(?:\u26A7|\uD83C\uDF08)|\u26D3\u200D\uD83D\uDCA5|\uD83E\uDDD1\u200D(?:[\u2695\u2696\u2708]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD\uDDD2\uDE70])|\u2764\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|(?:\u26F9|\uD83C[\uDFC4\uDFCA-\uDFCC]|\uD83D[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDD75\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDF])\u200D[\u2640\u2642]|(?:\uD83C\uDFC3|\uD83D\uDEB6|\uD83E\uDDCE)\u200D[\u2640\u2642\u27A1]|(?:\uD83D[\uDC68\uDC69])\u200D(?:[\u2695\u2696\u2708]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDC66\uDC67\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\u20E3|(?:\uD83C[\uDF85\uDFC3\uDFC7]|\uD83D[\uDC43\uDC4A-\uDC4C\uDC4F\uDC50\uDC66-\uDC69\uDC6B-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD\uDEC3-\uDEC5\uDEF0-\uDEF8])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDFC2\uDFC4\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC46-\uDC49\uDC4D\uDC4E\uDD74\uDD75\uDD90])(?:[\uFE0E\uFE0F]|\uD83C[\uDFFB-\uDFFF])|(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7\u26F8\u26FA\u26FD\u2702\u2705\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE1A\uDE2F\uDE37\uDF0D-\uDF0F\uDF15\uDF1C\uDF21\uDF24-\uDF2C\uDF36\uDF78\uDF7D\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFA7\uDFAC-\uDFAE\uDFC6\uDFCD\uDFCE\uDFD4-\uDFE0\uDFED\uDFF3\uDFF5\uDFF7]|\uD83D[\uDC08\uDC15\uDC1F\uDC26\uDC3F\uDC41\uDC53\uDC6A\uDC7D\uDCA3\uDCB0\uDCB3\uDCBB\uDCBF\uDCCB\uDCDA\uDCDF\uDCE4-\uDCE6\uDCEA-\uDCED\uDCF7\uDCF9-\uDCFB\uDCFD\uDD08\uDD0D\uDD12\uDD13\uDD49\uDD4A\uDD50-\uDD67\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDE10\uDE87\uDE8D\uDE91\uDE94\uDE98\uDEAD\uDEB2\uDEB9\uDEBA\uDEBC\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])[\uFE0E\uFE0F]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED8\uDEDC-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE7C\uDE80-\uDE8A\uDE8E-\uDEC6\uDEC8\uDECD-\uDEDC\uDEDF-\uDEEA\uDEEF-\uDEF8]/});var d=W((M2,VD)=>{var dF=Object.prototype.hasOwnProperty,P="~";function l(){}if(Object.create){if(l.prototype=Object.create(null),!new l().__proto__)P=!1}function cF(D,u,F){this.fn=D,this.context=u,this.once=F||!1}function uu(D,u,F,C,E){if(typeof F!=="function")throw TypeError("The listener must be a function");var B=new cF(F,C||D,E),A=P?P+u:u;if(!D._events[A])D._events[A]=B,D._eventsCount++;else if(!D._events[A].fn)D._events[A].push(B);else D._events[A]=[D._events[A],B];return D}function t(D,u){if(--D._eventsCount===0)D._events=new l;else delete D._events[u]}function X(){this._events=new l,this._eventsCount=0}X.prototype.eventNames=function(){var u=[],F,C;if(this._eventsCount===0)return u;for(C in F=this._events)if(dF.call(F,C))u.push(P?C.slice(1):C);if(Object.getOwnPropertySymbols)return u.concat(Object.getOwnPropertySymbols(F));return u};X.prototype.listeners=function(u){var F=P?P+u:u,C=this._events[F];if(!C)return[];if(C.fn)return[C.fn];for(var E=0,B=C.length,A=Array(B);E<B;E++)A[E]=C[E].fn;return A};X.prototype.listenerCount=function(u){var F=P?P+u:u,C=this._events[F];if(!C)return 0;if(C.fn)return 1;return C.length};X.prototype.emit=function(u,F,C,E,B,A){var G=P?P+u:u;if(!this._events[G])return!1;var Y=this._events[G],J=arguments.length,U,Z;if(Y.fn){if(Y.once)this.removeListener(u,Y.fn,void 0,!0);switch(J){case 1:return Y.fn.call(Y.context),!0;case 2:return Y.fn.call(Y.context,F),!0;case 3:return Y.fn.call(Y.context,F,C),!0;case 4:return Y.fn.call(Y.context,F,C,E),!0;case 5:return Y.fn.call(Y.context,F,C,E,B),!0;case 6:return Y.fn.call(Y.context,F,C,E,B,A),!0}for(Z=1,U=Array(J-1);Z<J;Z++)U[Z-1]=arguments[Z];Y.fn.apply(Y.context,U)}else{var Q=Y.length,w;for(Z=0;Z<Q;Z++){if(Y[Z].once)this.removeListener(u,Y[Z].fn,void 0,!0);switch(J){case 1:Y[Z].fn.call(Y[Z].context);break;case 2:Y[Z].fn.call(Y[Z].context,F);break;case 3:Y[Z].fn.call(Y[Z].context,F,C);break;case 4:Y[Z].fn.call(Y[Z].context,F,C,E);break;default:if(!U)for(w=1,U=Array(J-1);w<J;w++)U[w-1]=arguments[w];Y[Z].fn.apply(Y[Z].context,U)}}}return!0};X.prototype.on=function(u,F,C){return uu(this,u,F,C,!1)};X.prototype.once=function(u,F,C){return uu(this,u,F,C,!0)};X.prototype.removeListener=function(u,F,C,E){var B=P?P+u:u;if(!this._events[B])return this;if(!F)return t(this,B),this;var A=this._events[B];if(A.fn){if(A.fn===F&&(!E||A.once)&&(!C||A.context===C))t(this,B)}else{for(var G=0,Y=[],J=A.length;G<J;G++)if(A[G].fn!==F||E&&!A[G].once||C&&A[G].context!==C)Y.push(A[G]);if(Y.length)this._events[B]=Y.length===1?Y[0]:Y;else t(this,B)}return this};X.prototype.removeAllListeners=function(u){var F;if(u){if(F=P?P+u:u,this._events[F])t(this,F)}else this._events=new l,this._eventsCount=0;return this};X.prototype.off=X.prototype.removeListener;X.prototype.addListener=X.prototype.on;X.prefixed=P;X.EventEmitter=X;if(typeof VD<"u")VD.exports=X});var wD=W((Cu)=>{Object.defineProperty(Cu,"__esModule",{value:!0});Cu.SearchResult=void 0;var iF=/\$&/g,oF=/\$(\d)/g;class Fu{constructor(D,u,F){this.data=D,this.term=u,this.strategy=F}getReplacementData(D){let u=this.strategy.replace(this.data);if(u==null)return null;let F="";if(Array.isArray(u))F=u[1],u=u[0];let C=this.strategy.match(D);if(C==null||C.index==null)return null;let E=u.replace(iF,C[0]).replace(oF,(B,A)=>C[parseInt(A)]);return{start:C.index,end:C.index+C[0].length,beforeCursor:E,afterCursor:F}}replace(D,u){let F=this.getReplacementData(D);if(F===null)return;return u=F.afterCursor+u,[[D.slice(0,F.start),F.beforeCursor,D.slice(F.end)].join(""),u]}render(){return this.strategy.renderTemplate(this.data,this.term)}getStrategyId(){return this.strategy.getId()}}Cu.SearchResult=Fu});var HD=W((Au)=>{Object.defineProperty(Au,"__esModule",{value:!0});Au.Strategy=Au.DEFAULT_INDEX=void 0;var nF=wD();Au.DEFAULT_INDEX=1;class Bu{constructor(D){this.props=D,this.cache={}}destroy(){return this.cache={},this}replace(D){return this.props.replace(D)}execute(D,u){var F;let C=this.matchWithContext(D);if(!C)return!1;let E=C[(F=this.props.index)!==null&&F!==void 0?F:Au.DEFAULT_INDEX];return this.search(E,(B)=>{u(B.map((A)=>new nF.SearchResult(A,E,this)))},C),!0}renderTemplate(D,u){if(this.props.template)return this.props.template(D,u);if(typeof D==="string")return D;throw Error(`Unexpected render data type: ${typeof D}. Please implement template parameter by yourself`)}getId(){return this.props.id||null}match(D){return typeof this.props.match==="function"?this.props.match(D):D.match(this.props.match)}search(D,u,F){if(this.props.cache)this.searchWithCach(D,u,F);else this.props.search(D,u,F)}matchWithContext(D){let u=this.context(D);if(u===!1)return null;return this.match(u===!0?D:u)}context(D){return this.props.context?this.props.context(D):!0}searchWithCach(D,u,F){if(this.cache[D]!=null)u(this.cache[D]);else this.props.search(D,(C)=>{this.cache[D]=C,u(C)},F)}}Au.Strategy=Bu});var WD=W((Zu)=>{Object.defineProperty(Zu,"__esModule",{value:!0});Zu.Completer=void 0;var aF=d(),rF=HD();class Ju extends aF.EventEmitter{constructor(D){super();this.handleQueryResult=(u)=>{this.emit("hit",{searchResults:u})},this.strategies=D.map((u)=>new rF.Strategy(u))}destroy(){return this.strategies.forEach((D)=>D.destroy()),this}run(D){for(let u of this.strategies)if(u.execute(D,this.handleQueryResult))return;this.handleQueryResult([])}}Zu.Completer=Ju});var e=W(($u)=>{Object.defineProperty($u,"__esModule",{value:!0});$u.createCustomEvent=void 0;var sF=typeof window<"u"&&!!window.CustomEvent,tF=(D,u)=>{if(sF)return new CustomEvent(D,u);let F=document.createEvent("CustomEvent");return F.initCustomEvent(D,!1,(u===null||u===void 0?void 0:u.cancelable)||!1,(u===null||u===void 0?void 0:u.detail)||void 0),F};$u.createCustomEvent=tF});var zD=W((wu)=>{Object.defineProperty(wu,"__esModule",{value:!0});wu.Dropdown=wu.DEFAULT_DROPDOWN_ITEM_ACTIVE_CLASS_NAME=wu.DEFAULT_DROPDOWN_ITEM_CLASS_NAME=wu.DEFAULT_DROPDOWN_CLASS_NAME=wu.DEFAULT_DROPDOWN_PLACEMENT=wu.DEFAULT_DROPDOWN_MAX_COUNT=void 0;var eF=d(),f=e();wu.DEFAULT_DROPDOWN_MAX_COUNT=10;wu.DEFAULT_DROPDOWN_PLACEMENT="auto";wu.DEFAULT_DROPDOWN_CLASS_NAME="dropdown-menu textcomplete-dropdown";wu.DEFAULT_DROPDOWN_ITEM_CLASS_NAME="textcomplete-item";wu.DEFAULT_DROPDOWN_ITEM_ACTIVE_CLASS_NAME=`${wu.DEFAULT_DROPDOWN_ITEM_CLASS_NAME} active`;class XD extends eF.EventEmitter{static create(D){let u=document.createElement("ul");u.className=D.className||wu.DEFAULT_DROPDOWN_CLASS_NAME,Object.assign(u.style,{display:"none",position:"absolute",zIndex:"1000"},D.style);let F=D.parent||document.body;return F===null||F===void 0||F.appendChild(u),new XD(u,D)}constructor(D,u){super();this.el=D,this.option=u,this.shown=!1,this.items=[],this.activeIndex=null}render(D,u){let F=(0,f.createCustomEvent)("render",{cancelable:!0});if(this.emit("render",F),F.defaultPrevented)return this;if(this.clear(),D.length===0)return this.hide();return this.items=D.slice(0,this.option.maxCount||wu.DEFAULT_DROPDOWN_MAX_COUNT).map((C,E)=>{var B;return new Vu(this,E,C,((B=this.option)===null||B===void 0?void 0:B.item)||{})}),this.setStrategyId(D[0]).renderEdge(D,"header").renderItems().renderEdge(D,"footer").show().setOffset(u).activate(0),this.emit("rendered",(0,f.createCustomEvent)("rendered")),this}destroy(){var D;return this.clear(),(D=this.el.parentNode)===null||D===void 0||D.removeChild(this.el),this}select(D){let u={searchResult:D.searchResult},F=(0,f.createCustomEvent)("select",{cancelable:!0,detail:u});if(this.emit("select",F),F.defaultPrevented)return this;return this.hide(),this.emit("selected",(0,f.createCustomEvent)("selected",{detail:u})),this}show(){if(!this.shown){let D=(0,f.createCustomEvent)("show",{cancelable:!0});if(this.emit("show",D),D.defaultPrevented)return this;this.el.style.display="block",this.shown=!0,this.emit("shown",(0,f.createCustomEvent)("shown"))}return this}hide(){if(this.shown){let D=(0,f.createCustomEvent)("hide",{cancelable:!0});if(this.emit("hide",D),D.defaultPrevented)return this;this.el.style.display="none",this.shown=!1,this.clear(),this.emit("hidden",(0,f.createCustomEvent)("hidden"))}return this}clear(){return this.items.forEach((D)=>D.destroy()),this.items=[],this.el.innerHTML="",this.activeIndex=null,this}up(D){return this.shown?this.moveActiveItem("prev",D):this}down(D){return this.shown?this.moveActiveItem("next",D):this}moveActiveItem(D,u){if(this.activeIndex!=null){let F=D==="next"?this.getNextActiveIndex():this.getPrevActiveIndex();if(F!=null)this.activate(F),u.preventDefault()}return this}activate(D){if(this.activeIndex!==D){if(this.activeIndex!=null)this.items[this.activeIndex].deactivate();this.activeIndex=D,this.items[D].activate()}return this}isShown(){return this.shown}getActiveItem(){return this.activeIndex!=null?this.items[this.activeIndex]:null}setOffset(D){let u=document.documentElement;if(u){let F=this.el.offsetWidth;if(D.left){let B=this.option.dynamicWidth?u.scrollWidth:u.clientWidth;if(D.left+F>B)D.left=B-F;this.el.style.left=`${D.left}px`}else if(D.right){if(D.right-F<0)D.right=0;this.el.style.right=`${D.right}px`}let C=!1,E=this.option.placement||wu.DEFAULT_DROPDOWN_PLACEMENT;if(E==="auto"){let B=this.items.length*D.lineHeight;C=D.clientTop!=null&&D.clientTop+B>u.clientHeight}if(E==="top"||C)this.el.style.bottom=`${u.clientHeight-D.top+D.lineHeight}px`,this.el.style.top="auto";else this.el.style.top=`${D.top}px`,this.el.style.bottom="auto"}return this}getNextActiveIndex(){if(this.activeIndex==null)throw Error();return this.activeIndex<this.items.length-1?this.activeIndex+1:this.option.rotate?0:null}getPrevActiveIndex(){if(this.activeIndex==null)throw Error();return this.activeIndex!==0?this.activeIndex-1:this.option.rotate?this.items.length-1:null}renderItems(){let D=document.createDocumentFragment();for(let u of this.items)D.appendChild(u.el);return this.el.appendChild(D),this}setStrategyId(D){let u=D.getStrategyId();if(u)this.el.dataset.strategy=u;return this}renderEdge(D,u){let F=this.option[u],C=document.createElement("li");return C.className=`textcomplete-${u}`,C.innerHTML=typeof F==="function"?F(D.map((E)=>E.data)):F||"",this.el.appendChild(C),this}}wu.Dropdown=XD;class Vu{constructor(D,u,F,C){this.dropdown=D,this.index=u,this.searchResult=F,this.props=C,this.active=!1,this.onClick=(A)=>{A.preventDefault(),this.dropdown.select(this)},this.className=this.props.className||wu.DEFAULT_DROPDOWN_ITEM_CLASS_NAME,this.activeClassName=this.props.activeClassName||wu.DEFAULT_DROPDOWN_ITEM_ACTIVE_CLASS_NAME;let E=document.createElement("li");E.className=this.active?this.activeClassName:this.className;let B=document.createElement("span");B.tabIndex=-1,B.innerHTML=this.searchResult.render(),E.appendChild(B),E.addEventListener("click",this.onClick),this.el=E}destroy(){var D;let u=this.el;return(D=u.parentNode)===null||D===void 0||D.removeChild(u),u.removeEventListener("click",this.onClick,!1),this}activate(){if(!this.active)this.active=!0,this.el.className=this.activeClassName,this.dropdown.el.scrollTop=this.el.offsetTop;return this}deactivate(){if(this.active)this.active=!1,this.el.className=this.className;return this}}});var Nu=W((Tu)=>{Object.defineProperty(Tu,"__esModule",{value:!0});Tu.Editor=void 0;var D2=d(),DD=e();class Ku extends D2.EventEmitter{destroy(){return this}applySearchResult(D){throw Error("Not implemented.")}getCursorOffset(){throw Error("Not implemented.")}getBeforeCursor(){throw Error("Not implemented.")}emitMoveEvent(D){let u=(0,DD.createCustomEvent)("move",{cancelable:!0,detail:{code:D}});return this.emit("move",u),u}emitEnterEvent(){let D=(0,DD.createCustomEvent)("enter",{cancelable:!0});return this.emit("enter",D),D}emitChangeEvent(){let D=(0,DD.createCustomEvent)("change",{detail:{beforeCursor:this.getBeforeCursor()}});return this.emit("change",D),D}emitEscEvent(){let D=(0,DD.createCustomEvent)("esc",{cancelable:!0});return this.emit("esc",D),D}getCode(D){switch(D.keyCode){case 9:case 13:return"ENTER";case 27:return"ESC";case 38:return"UP";case 40:return"DOWN";case 78:if(D.ctrlKey)return"DOWN";break;case 80:if(D.ctrlKey)return"UP";break}return"OTHER"}}Tu.Editor=Ku});var Lu=W((ju)=>{Object.defineProperty(ju,"__esModule",{value:!0});ju.Textcomplete=void 0;var u2=d(),F2=zD(),C2=WD(),E2=["show","shown","render","rendered","selected","hidden","hide"];class Ou extends u2.EventEmitter{constructor(D,u,F){super();this.editor=D,this.isQueryInFlight=!1,this.nextPendingQuery=null,this.handleHit=({searchResults:C})=>{if(C.length)this.dropdown.render(C,this.editor.getCursorOffset());else this.dropdown.hide();if(this.isQueryInFlight=!1,this.nextPendingQuery!==null)this.trigger(this.nextPendingQuery)},this.handleMove=(C)=>{C.detail.code==="UP"?this.dropdown.up(C):this.dropdown.down(C)},this.handleEnter=(C)=>{let E=this.dropdown.getActiveItem();if(E)this.dropdown.select(E),C.preventDefault();else this.dropdown.hide()},this.handleEsc=(C)=>{if(this.dropdown.isShown())this.dropdown.hide(),C.preventDefault()},this.handleChange=(C)=>{if(C.detail.beforeCursor!=null)this.trigger(C.detail.beforeCursor);else this.dropdown.hide()},this.handleSelect=(C)=>{if(this.emit("select",C),!C.defaultPrevented)this.editor.applySearchResult(C.detail.searchResult)},this.handleResize=()=>{if(this.dropdown.isShown())this.dropdown.setOffset(this.editor.getCursorOffset())},this.completer=new C2.Completer(u),this.dropdown=F2.Dropdown.create((F===null||F===void 0?void 0:F.dropdown)||{}),this.startListening()}destroy(D=!0){if(this.completer.destroy(),this.dropdown.destroy(),D)this.editor.destroy();return this.stopListening(),this}isShown(){return this.dropdown.isShown()}hide(){return this.dropdown.hide(),this}trigger(D){if(this.isQueryInFlight)this.nextPendingQuery=D;else this.isQueryInFlight=!0,this.nextPendingQuery=null,this.completer.run(D);return this}startListening(){var D;this.editor.on("move",this.handleMove).on("enter",this.handleEnter).on("esc",this.handleEsc).on("change",this.handleChange),this.dropdown.on("select",this.handleSelect);for(let u of E2)this.dropdown.on(u,(F)=>this.emit(u,F));this.completer.on("hit",this.handleHit),(D=this.dropdown.el.ownerDocument.defaultView)===null||D===void 0||D.addEventListener("resize",this.handleResize)}stopListening(){var D;(D=this.dropdown.el.ownerDocument.defaultView)===null||D===void 0||D.removeEventListener("resize",this.handleResize),this.completer.removeAllListeners(),this.dropdown.removeAllListeners(),this.editor.removeListener("move",this.handleMove).removeListener("enter",this.handleEnter).removeListener("esc",this.handleEsc).removeListener("change",this.handleChange)}}ju.Textcomplete=Ou});var KD=W((K)=>{var B2=K&&K.__createBinding||(Object.create?function(D,u,F,C){if(C===void 0)C=F;var E=Object.getOwnPropertyDescriptor(u,F);if(!E||("get"in E?!u.__esModule:E.writable||E.configurable))E={enumerable:!0,get:function(){return u[F]}};Object.defineProperty(D,C,E)}:function(D,u,F,C){if(C===void 0)C=F;D[C]=u[F]}),k=K&&K.__exportStar||function(D,u){for(var F in D)if(F!=="default"&&!Object.prototype.hasOwnProperty.call(u,F))B2(u,D,F)};Object.defineProperty(K,"__esModule",{value:!0});k(WD(),K);k(zD(),K);k(Nu(),K);k(wD(),K);k(HD(),K);k(Lu(),K);k(e(),K)});var Su=W((Iu)=>{Object.defineProperty(Iu,"__esModule",{value:!0});Iu.calculateElementOffset=void 0;var A2=(D)=>{let u=D.getBoundingClientRect(),F=D.ownerDocument;if(F==null)throw Error("Given element does not belong to document");let{defaultView:C,documentElement:E}=F;if(C==null)throw Error("Given element does not belong to window");let B={top:u.top+C.pageYOffset,left:u.left+C.pageXOffset};if(E)B.top-=E.clientTop,B.left-=E.clientLeft;return B};Iu.calculateElementOffset=A2});var gu=W((fu)=>{Object.defineProperty(fu,"__esModule",{value:!0});fu.getLineHeightPx=void 0;var G2=48,Y2=57,bu=(D)=>G2<=D&&D<=Y2,J2=(D)=>{let u=getComputedStyle(D),F=u.lineHeight;if(bu(F.charCodeAt(0))){let C=parseFloat(F);return bu(F.charCodeAt(F.length-1))?C*parseFloat(u.fontSize):C}return Z2(D.nodeName,u)};fu.getLineHeightPx=J2;var Z2=(D,u)=>{let F=document.body;if(!F)return 0;let C=document.createElement(D);if(C.innerHTML="&nbsp;",Object.assign(C.style,{fontSize:u.fontSize,fontFamily:u.fontFamily,padding:"0"}),F.appendChild(C),C instanceof HTMLTextAreaElement)C.rows=1;let E=C.offsetHeight;return F.removeChild(C),E}});var vu=W((yu)=>{Object.defineProperty(yu,"__esModule",{value:!0});yu.isSafari=void 0;var U2=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent);yu.isSafari=U2});var hu=W((I)=>{var $2=I&&I.__createBinding||(Object.create?function(D,u,F,C){if(C===void 0)C=F;var E=Object.getOwnPropertyDescriptor(u,F);if(!E||("get"in E?!u.__esModule:E.writable||E.configurable))E={enumerable:!0,get:function(){return u[F]}};Object.defineProperty(D,C,E)}:function(D,u,F,C){if(C===void 0)C=F;D[C]=u[F]}),TD=I&&I.__exportStar||function(D,u){for(var F in D)if(F!=="default"&&!Object.prototype.hasOwnProperty.call(u,F))$2(u,D,F)};Object.defineProperty(I,"__esModule",{value:!0});TD(Su(),I);TD(gu(),I);TD(vu(),I)});var du=W((pu)=>{Object.defineProperty(pu,"__esModule",{value:!0});pu.ContenteditableEditor=void 0;var Q2=KD(),xu=hu();class mu extends Q2.Editor{constructor(D){super();this.el=D,this.onInput=()=>{this.el.normalize(),this.emitChangeEvent()},this.onKeydown=(u)=>{let F=this.getCode(u),C;if(F==="UP"||F==="DOWN")C=this.emitMoveEvent(F);else if(F==="ENTER")C=this.emitEnterEvent();else if(F==="ESC")C=this.emitEscEvent();if(C&&C.defaultPrevented)u.preventDefault()},this.startListening=()=>{this.el.addEventListener("input",this.onInput),this.el.addEventListener("keydown",this.onKeydown)},this.stopListening=()=>{this.el.removeEventListener("input",this.onInput),this.el.removeEventListener("keydown",this.onKeydown)},this.startListening()}destroy(){return super.destroy(),this.stopListening(),this}applySearchResult(D){let u=this.getBeforeCursor(),F=this.getAfterCursor();if(u!=null&&F!=null){let C=D.replace(u,F);if(Array.isArray(C)){let E=C[0];if((0,xu.isSafari)())E=E.replace(u,"");let B=this.getRange();if(B.selectNode(B.startContainer),this.el.dataset.requiresManualDeletions){for(let G=0;G<u.length;G++)this.el.ownerDocument.execCommand("delete",!1,null);for(let G=0;G<F.length;G++)this.el.ownerDocument.execCommand("forwardDelete",!1,null)}this.el.ownerDocument.execCommand("insertText",!1,E+C[1]),B.detach();let A=this.getRange();A.setStart(A.startContainer,E.length),A.collapse(!0)}}}getCursorOffset(){let D=this.getRange(),u=D.getBoundingClientRect(),F=this.el.ownerDocument.body.getBoundingClientRect(),C=D.startContainer,E=C instanceof Text?C.parentElement:C,B=u.left,A=(0,xu.getLineHeightPx)(E),G=u.top-F.top+A;return this.el.dir!=="rtl"?{left:B,lineHeight:A,top:G}:{right:document.documentElement.clientWidth-B,lineHeight:A,top:G}}getBeforeCursor(){let D=this.getRange();if(D.collapsed&&D.startContainer instanceof Text)return D.startContainer.wholeText.substring(0,D.startOffset);return null}getAfterCursor(){let D=this.getRange();if(D.collapsed&&D.startContainer instanceof Text)return D.startContainer.wholeText.substring(D.startOffset);return null}getRange(D){var u;let F=(u=this.el.ownerDocument.defaultView)===null||u===void 0?void 0:u.getSelection();if(F==null)throw Error("The element does not belong to view");for(let B=0,A=F.rangeCount;B<A;B++){let G=F.getRangeAt(B);if(this.el.contains(G.startContainer))return G}if(D)throw Error("Unexpected");let C=this.el.ownerDocument.activeElement;this.el.focus();let E=this.getRange(!0);if(C){let B=C;B.focus&&B.focus()}return E}}pu.ContenteditableEditor=mu});var cu=W((v)=>{var V2=v&&v.__createBinding||(Object.create?function(D,u,F,C){if(C===void 0)C=F;var E=Object.getOwnPropertyDescriptor(u,F);if(!E||("get"in E?!u.__esModule:E.writable||E.configurable))E={enumerable:!0,get:function(){return u[F]}};Object.defineProperty(D,C,E)}:function(D,u,F,C){if(C===void 0)C=F;D[C]=u[F]}),w2=v&&v.__exportStar||function(D,u){for(var F in D)if(F!=="default"&&!Object.prototype.hasOwnProperty.call(u,F))V2(u,D,F)};Object.defineProperty(v,"__esModule",{value:!0});w2(du(),v)});/*!
 * element-emotes
 * Copyright (C) 2022-present  Michael Serajnik  https://github.com/mserajnik
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */var YF=(D,u)=>`${D}?accessKey=${u}`,qD={fetchEmotes:async()=>{let D=await fetch(YF(V.get("emotesUrl"),V.get("accessKey")));if(!D.ok){let u=Error(`HTTP status code: ${D.status}`);throw u.response=D,u.status=D.status,u}return D=await D.json(),D.emotes}};/*!
 * element-emotes
 * Copyright (C) 2022-present  Michael Serajnik  https://github.com/mserajnik
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */var LD=!1,p={emotesUrl:null,accessKey:null,defaultEmoteSize:"2em",largeEmoteSize:"4em",useFrozenEmotes:!1,emoteSuggestionAmount:10,useEmoteFuzzyMatching:!0,emoteFuzzyMatchingLocation:0,emoteFuzzyMatchingDistance:100,emoteFuzzyMatchingThreshold:0.6,emoteSuggestionBlacklistedStrings:"",usernameColors:["","","","","","","",""],displayStatusIndicator:!0,emotes:[]},V={initialize:()=>{return new Promise((D,u)=>{chrome.storage.sync.get(null,async(F)=>{if(chrome.runtime.lastError)return u(Error("Error while intializing the store."));for(let C in F){if(!Object.hasOwn(p,C))continue;p[C]=F[C]}if(LD=!0,!p.emotesUrl)return D();try{p.emotes=await qD.fetchEmotes()}catch{return u(Error("Error while trying to fetch the emote list; is the emote server URL and/or access key set correctly?"))}D()})})},get:(D)=>{if(!LD)throw Error("Store has not been initialized; call `store.initialize()` first.");return p[D]}};var fD=GF(_D(),1);/*!
 * element-emotes
 * Copyright (C) 2022-present  Michael Serajnik  https://github.com/mserajnik
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */var m,o,JF=(D)=>{for(let u of V.get("emotes"))D=D.split(`:${u.name}:`).join("");return D},ZF=(D)=>{return D=JF(D.replace(/\s/g,"").replace(/[\u200D\u2003]/g,"").replace(new RegExp(fD.default.source,"gi"),"")),D.trim()===""},UF=(D)=>{return D.match(/^.+\/emotes\/.+\.(gif|apng)(\?.+)?$/)?D.split("/emotes/").join("/frozen-emotes/"):null},SD=(D=!1)=>{let u=document.querySelectorAll("[data-frozen-emote-url]");if(!u.length)return;for(let F of u){if(D){F.src=F.dataset.frozenEmoteUrl;continue}F.src=F.dataset.emoteUrl}},bD=(D,u=!1)=>{if(D.dataset.emotesReplaced&&!u)return;let F=D.querySelector(".mx_EventTile_body");if(!F)return;let C=F.innerHTML,E=ZF(F.textContent)?`max-height:${V.get("largeEmoteSize")};vertical-align:bottom`:`max-height:${V.get("defaultEmoteSize")}`;for(let B of V.get("emotes")){let A=UF(B.url);C=C.split(`:${B.name}:`).join(`<img
          style="${E}"`+(o&&A?document.hasFocus()?`src="${B.url}?accessKey=${m}"`:`src="${A}?accessKey=${m}"`:`src="${B.url}?accessKey=${m}"`)+`data-emote-url="${B.url}?accessKey=${m}"`+(o&&A?`data-frozen-emote-url="${A}?accessKey=${m}"`:"")+`alt="${B.name}"
          title="${B.name}">`)}F.innerHTML=C,D.dataset.emotesReplaced=!0},MD=(D)=>{if(D.classList&&D.classList.contains("mx_EventTile_content")){bD(D);return}if(D.classList&&D.classList.contains("mx_EventTile_edited")){bD(D.parentNode,!0);return}if(D.childNodes)[...D.childNodes].forEach(MD)},gD={initialize:()=>{if(m=V.get("accessKey"),o=V.get("useFrozenEmotes"),new window.MutationObserver((D)=>{for(let u of D)for(let F of u.addedNodes)MD(F)}).observe(document.body,{childList:!0,subtree:!0}),o)window.focus(),window.addEventListener("focus",()=>{SD(!1)}),window.addEventListener("blur",()=>{SD(!0)})}};function q(D){return!Array.isArray?lD(D)==="[object Array]":Array.isArray(D)}var $F=1/0;function QF(D){if(typeof D=="string")return D;let u=D+"";return u=="0"&&1/D==-$F?"-0":u}function VF(D){return D==null?"":QF(D)}function O(D){return typeof D==="string"}function mD(D){return typeof D==="number"}function wF(D){return D===!0||D===!1||HF(D)&&lD(D)=="[object Boolean]"}function pD(D){return typeof D==="object"}function HF(D){return pD(D)&&D!==null}function z(D){return D!==void 0&&D!==null}function ED(D){return!D.trim().length}function lD(D){return D==null?D===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(D)}var WF="Incorrect 'index' type",XF=(D)=>`Invalid value for key ${D}`,PF=(D)=>`Pattern length exceeds max of ${D}.`,zF=(D)=>`Missing ${D} property in key`,KF=(D)=>`Property 'weight' in key '${D}' must be a positive integer`,yD=Object.prototype.hasOwnProperty;class dD{constructor(D){this._keys=[],this._keyMap={};let u=0;D.forEach((F)=>{let C=cD(F);this._keys.push(C),this._keyMap[C.id]=C,u+=C.weight}),this._keys.forEach((F)=>{F.weight/=u})}get(D){return this._keyMap[D]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function cD(D){let u=null,F=null,C=null,E=1,B=null;if(O(D)||q(D))C=D,u=kD(D),F=BD(D);else{if(!yD.call(D,"name"))throw Error(zF("name"));let A=D.name;if(C=A,yD.call(D,"weight")){if(E=D.weight,E<=0)throw Error(KF(A))}u=kD(A),F=BD(A),B=D.getFn}return{path:u,id:F,weight:E,src:C,getFn:B}}function kD(D){return q(D)?D:D.split(".")}function BD(D){return q(D)?D.join("."):D}function TF(D,u){let F=[],C=!1,E=(B,A,G)=>{if(!z(B))return;if(!A[G])F.push(B);else{let Y=A[G],J=B[Y];if(!z(J))return;if(G===A.length-1&&(O(J)||mD(J)||wF(J)))F.push(VF(J));else if(q(J)){C=!0;for(let U=0,Z=J.length;U<Z;U+=1)E(J[U],A,G+1)}else if(A.length)E(J,A,G+1)}};return E(D,O(u)?u.split("."):u,0),C?F:F[0]}var RF={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},NF={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(D,u)=>D.score===u.score?D.idx<u.idx?-1:1:D.score<u.score?-1:1},OF={location:0,threshold:0.6,distance:100},jF={useExtendedSearch:!1,getFn:TF,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},$={...NF,...RF,...OF,...jF},qF=/[^ ]+/g;function LF(D=1,u=3){let F=new Map,C=Math.pow(10,u);return{get(E){let B=E.match(qF).length;if(F.has(B))return F.get(B);let A=1/Math.pow(B,0.5*D),G=parseFloat(Math.round(A*C)/C);return F.set(B,G),G},clear(){F.clear()}}}class s{constructor({getFn:D=$.getFn,fieldNormWeight:u=$.fieldNormWeight}={}){this.norm=LF(u,3),this.getFn=D,this.isCreated=!1,this.setIndexRecords()}setSources(D=[]){this.docs=D}setIndexRecords(D=[]){this.records=D}setKeys(D=[]){this.keys=D,this._keysMap={},D.forEach((u,F)=>{this._keysMap[u.id]=F})}create(){if(this.isCreated||!this.docs.length)return;if(this.isCreated=!0,O(this.docs[0]))this.docs.forEach((D,u)=>{this._addString(D,u)});else this.docs.forEach((D,u)=>{this._addObject(D,u)});this.norm.clear()}add(D){let u=this.size();if(O(D))this._addString(D,u);else this._addObject(D,u)}removeAt(D){this.records.splice(D,1);for(let u=D,F=this.size();u<F;u+=1)this.records[u].i-=1}getValueForItemAtKeyId(D,u){return D[this._keysMap[u]]}size(){return this.records.length}_addString(D,u){if(!z(D)||ED(D))return;let F={v:D,i:u,n:this.norm.get(D)};this.records.push(F)}_addObject(D,u){let F={i:u,$:{}};this.keys.forEach((C,E)=>{let B=C.getFn?C.getFn(D):this.getFn(D,C.path);if(!z(B))return;if(q(B)){let A=[],G=[{nestedArrIndex:-1,value:B}];while(G.length){let{nestedArrIndex:Y,value:J}=G.pop();if(!z(J))continue;if(O(J)&&!ED(J)){let U={v:J,i:Y,n:this.norm.get(J)};A.push(U)}else if(q(J))J.forEach((U,Z)=>{G.push({nestedArrIndex:Z,value:U})})}F.$[E]=A}else if(O(B)&&!ED(B)){let A={v:B,n:this.norm.get(B)};F.$[E]=A}}),this.records.push(F)}toJSON(){return{keys:this.keys,records:this.records}}}function iD(D,u,{getFn:F=$.getFn,fieldNormWeight:C=$.fieldNormWeight}={}){let E=new s({getFn:F,fieldNormWeight:C});return E.setKeys(D.map(cD)),E.setSources(u),E.create(),E}function IF(D,{getFn:u=$.getFn,fieldNormWeight:F=$.fieldNormWeight}={}){let{keys:C,records:E}=D,B=new s({getFn:u,fieldNormWeight:F});return B.setKeys(C),B.setIndexRecords(E),B}function n(D,{errors:u=0,currentLocation:F=0,expectedLocation:C=0,distance:E=$.distance,ignoreLocation:B=$.ignoreLocation}={}){let A=u/D.length;if(B)return A;let G=Math.abs(C-F);if(!E)return G?1:A;return A+G/E}function _F(D=[],u=$.minMatchCharLength){let F=[],C=-1,E=-1,B=0;for(let A=D.length;B<A;B+=1){let G=D[B];if(G&&C===-1)C=B;else if(!G&&C!==-1){if(E=B-1,E-C+1>=u)F.push([C,E]);C=-1}}if(D[B-1]&&B-C>=u)F.push([C,B-1]);return F}var y=32;function SF(D,u,F,{location:C=$.location,distance:E=$.distance,threshold:B=$.threshold,findAllMatches:A=$.findAllMatches,minMatchCharLength:G=$.minMatchCharLength,includeMatches:Y=$.includeMatches,ignoreLocation:J=$.ignoreLocation}={}){if(u.length>y)throw Error(PF(y));let U=u.length,Z=D.length,Q=Math.max(0,Math.min(C,Z)),w=B,H=Q,T=G>1||Y,M=T?Array(Z):[],j;while((j=D.indexOf(u,H))>-1){let R=n(u,{currentLocation:j,expectedLocation:Q,distance:E,ignoreLocation:J});if(w=Math.min(R,w),H=j+U,T){let _=0;while(_<U)M[j+_]=1,_+=1}}H=-1;let h=[],g=1,c=U+Z,FF=1<<U-1;for(let R=0;R<U;R+=1){let _=0,S=c;while(_<S){if(n(u,{errors:R,currentLocation:Q+S,expectedLocation:Q,distance:E,ignoreLocation:J})<=w)_=S;else c=S;S=Math.floor((c-_)/2+_)}c=S;let ND=Math.max(1,Q-S+1),CD=A?Z:Math.min(Q+S,Z)+U,x=Array(CD+2);x[CD+1]=(1<<R)-1;for(let N=CD;N>=ND;N-=1){let i=N-1,OD=F[D.charAt(i)];if(T)M[i]=+!!OD;if(x[N]=(x[N+1]<<1|1)&OD,R)x[N]|=(h[N+1]|h[N])<<1|1|h[N+1];if(x[N]&FF){if(g=n(u,{errors:R,currentLocation:i,expectedLocation:Q,distance:E,ignoreLocation:J}),g<=w){if(w=g,H=i,H<=Q)break;ND=Math.max(1,2*Q-H)}}}if(n(u,{errors:R+1,currentLocation:Q,expectedLocation:Q,distance:E,ignoreLocation:J})>w)break;h=x}let FD={isMatch:H>=0,score:Math.max(0.001,g)};if(T){let R=_F(M,G);if(!R.length)FD.isMatch=!1;else if(Y)FD.indices=R}return FD}function bF(D){let u={};for(let F=0,C=D.length;F<C;F+=1){let E=D.charAt(F);u[E]=(u[E]||0)|1<<C-F-1}return u}var a=String.prototype.normalize?(D)=>D.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):(D)=>D;class UD{constructor(D,{location:u=$.location,threshold:F=$.threshold,distance:C=$.distance,includeMatches:E=$.includeMatches,findAllMatches:B=$.findAllMatches,minMatchCharLength:A=$.minMatchCharLength,isCaseSensitive:G=$.isCaseSensitive,ignoreDiacritics:Y=$.ignoreDiacritics,ignoreLocation:J=$.ignoreLocation}={}){if(this.options={location:u,threshold:F,distance:C,includeMatches:E,findAllMatches:B,minMatchCharLength:A,isCaseSensitive:G,ignoreDiacritics:Y,ignoreLocation:J},D=G?D:D.toLowerCase(),D=Y?a(D):D,this.pattern=D,this.chunks=[],!this.pattern.length)return;let U=(Q,w)=>{this.chunks.push({pattern:Q,alphabet:bF(Q),startIndex:w})},Z=this.pattern.length;if(Z>y){let Q=0,w=Z%y,H=Z-w;while(Q<H)U(this.pattern.substr(Q,y),Q),Q+=y;if(w){let T=Z-y;U(this.pattern.substr(T),T)}}else U(this.pattern,0)}searchIn(D){let{isCaseSensitive:u,ignoreDiacritics:F,includeMatches:C}=this.options;if(D=u?D:D.toLowerCase(),D=F?a(D):D,this.pattern===D){let H={isMatch:!0,score:0};if(C)H.indices=[[0,D.length-1]];return H}let{location:E,distance:B,threshold:A,findAllMatches:G,minMatchCharLength:Y,ignoreLocation:J}=this.options,U=[],Z=0,Q=!1;this.chunks.forEach(({pattern:H,alphabet:T,startIndex:M})=>{let{isMatch:j,score:h,indices:g}=SF(D,H,T,{location:E+M,distance:B,threshold:A,findAllMatches:G,minMatchCharLength:Y,includeMatches:C,ignoreLocation:J});if(j)Q=!0;if(Z+=h,j&&g)U=[...U,...g]});let w={isMatch:Q,score:Q?Z/this.chunks.length:1};if(Q&&C)w.indices=U;return w}}class L{constructor(D){this.pattern=D}static isMultiMatch(D){return vD(D,this.multiRegex)}static isSingleMatch(D){return vD(D,this.singleRegex)}search(){}}function vD(D,u){let F=D.match(u);return F?F[1]:null}class oD extends L{constructor(D){super(D)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(D){let u=D===this.pattern;return{isMatch:u,score:u?0:1,indices:[0,this.pattern.length-1]}}}class nD extends L{constructor(D){super(D)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(D){let F=D.indexOf(this.pattern)===-1;return{isMatch:F,score:F?0:1,indices:[0,D.length-1]}}}class aD extends L{constructor(D){super(D)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(D){let u=D.startsWith(this.pattern);return{isMatch:u,score:u?0:1,indices:[0,this.pattern.length-1]}}}class rD extends L{constructor(D){super(D)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(D){let u=!D.startsWith(this.pattern);return{isMatch:u,score:u?0:1,indices:[0,D.length-1]}}}class sD extends L{constructor(D){super(D)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(D){let u=D.endsWith(this.pattern);return{isMatch:u,score:u?0:1,indices:[D.length-this.pattern.length,D.length-1]}}}class tD extends L{constructor(D){super(D)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(D){let u=!D.endsWith(this.pattern);return{isMatch:u,score:u?0:1,indices:[0,D.length-1]}}}class $D extends L{constructor(D,{location:u=$.location,threshold:F=$.threshold,distance:C=$.distance,includeMatches:E=$.includeMatches,findAllMatches:B=$.findAllMatches,minMatchCharLength:A=$.minMatchCharLength,isCaseSensitive:G=$.isCaseSensitive,ignoreDiacritics:Y=$.ignoreDiacritics,ignoreLocation:J=$.ignoreLocation}={}){super(D);this._bitapSearch=new UD(D,{location:u,threshold:F,distance:C,includeMatches:E,findAllMatches:B,minMatchCharLength:A,isCaseSensitive:G,ignoreDiacritics:Y,ignoreLocation:J})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(D){return this._bitapSearch.searchIn(D)}}class QD extends L{constructor(D){super(D)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(D){let u=0,F,C=[],E=this.pattern.length;while((F=D.indexOf(this.pattern,u))>-1)u=F+E,C.push([F,u-1]);let B=!!C.length;return{isMatch:B,score:B?0:1,indices:C}}}var AD=[oD,QD,aD,rD,tD,sD,nD,$D],hD=AD.length,fF=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,MF="|";function gF(D,u={}){return D.split(MF).map((F)=>{let C=F.trim().split(fF).filter((B)=>B&&!!B.trim()),E=[];for(let B=0,A=C.length;B<A;B+=1){let G=C[B],Y=!1,J=-1;while(!Y&&++J<hD){let U=AD[J],Z=U.isMultiMatch(G);if(Z)E.push(new U(Z,u)),Y=!0}if(Y)continue;J=-1;while(++J<hD){let U=AD[J],Z=U.isSingleMatch(G);if(Z){E.push(new U(Z,u));break}}}return E})}var yF=new Set([$D.type,QD.type]);class eD{constructor(D,{isCaseSensitive:u=$.isCaseSensitive,ignoreDiacritics:F=$.ignoreDiacritics,includeMatches:C=$.includeMatches,minMatchCharLength:E=$.minMatchCharLength,ignoreLocation:B=$.ignoreLocation,findAllMatches:A=$.findAllMatches,location:G=$.location,threshold:Y=$.threshold,distance:J=$.distance}={}){this.query=null,this.options={isCaseSensitive:u,ignoreDiacritics:F,includeMatches:C,minMatchCharLength:E,findAllMatches:A,ignoreLocation:B,location:G,threshold:Y,distance:J},D=u?D:D.toLowerCase(),D=F?a(D):D,this.pattern=D,this.query=gF(this.pattern,this.options)}static condition(D,u){return u.useExtendedSearch}searchIn(D){let u=this.query;if(!u)return{isMatch:!1,score:1};let{includeMatches:F,isCaseSensitive:C,ignoreDiacritics:E}=this.options;D=C?D:D.toLowerCase(),D=E?a(D):D;let B=0,A=[],G=0;for(let Y=0,J=u.length;Y<J;Y+=1){let U=u[Y];A.length=0,B=0;for(let Z=0,Q=U.length;Z<Q;Z+=1){let w=U[Z],{isMatch:H,indices:T,score:M}=w.search(D);if(H){if(B+=1,G+=M,F){let j=w.constructor.type;if(yF.has(j))A=[...A,...T];else A.push(T)}}else{G=0,B=0,A.length=0;break}}if(B){let Z={isMatch:!0,score:G/B};if(F)Z.indices=A;return Z}}return{isMatch:!1,score:1}}}var GD=[];function kF(...D){GD.push(...D)}function YD(D,u){for(let F=0,C=GD.length;F<C;F+=1){let E=GD[F];if(E.condition(D,u))return new E(D,u)}return new UD(D,u)}var r={AND:"$and",OR:"$or"},JD={PATH:"$path",PATTERN:"$val"},ZD=(D)=>!!(D[r.AND]||D[r.OR]),vF=(D)=>!!D[JD.PATH],hF=(D)=>!q(D)&&pD(D)&&!ZD(D),xD=(D)=>({[r.AND]:Object.keys(D).map((u)=>({[u]:D[u]}))});function Du(D,u,{auto:F=!0}={}){let C=(E)=>{let B=Object.keys(E),A=vF(E);if(!A&&B.length>1&&!ZD(E))return C(xD(E));if(hF(E)){let Y=A?E[JD.PATH]:B[0],J=A?E[JD.PATTERN]:E[Y];if(!O(J))throw Error(XF(Y));let U={keyId:BD(Y),pattern:J};if(F)U.searcher=YD(J,u);return U}let G={children:[],operator:B[0]};return B.forEach((Y)=>{let J=E[Y];if(q(J))J.forEach((U)=>{G.children.push(C(U))})}),G};if(!ZD(D))D=xD(D);return C(D)}function xF(D,{ignoreFieldNorm:u=$.ignoreFieldNorm}){D.forEach((F)=>{let C=1;F.matches.forEach(({key:E,norm:B,score:A})=>{let G=E?E.weight:null;C*=Math.pow(A===0&&G?Number.EPSILON:A,(G||1)*(u?1:B))}),F.score=C})}function mF(D,u){let F=D.matches;if(u.matches=[],!z(F))return;F.forEach((C)=>{if(!z(C.indices)||!C.indices.length)return;let{indices:E,value:B}=C,A={indices:E,value:B};if(C.key)A.key=C.key.src;if(C.idx>-1)A.refIndex=C.idx;u.matches.push(A)})}function pF(D,u){u.score=D.score}function lF(D,u,{includeMatches:F=$.includeMatches,includeScore:C=$.includeScore}={}){let E=[];if(F)E.push(mF);if(C)E.push(pF);return D.map((B)=>{let{idx:A}=B,G={item:u[A],refIndex:A};if(E.length)E.forEach((Y)=>{Y(B,G)});return G})}class b{constructor(D,u={},F){this.options={...$,...u},this.options.useExtendedSearch,this._keyStore=new dD(this.options.keys),this.setCollection(D,F)}setCollection(D,u){if(this._docs=D,u&&!(u instanceof s))throw Error(WF);this._myIndex=u||iD(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(D){if(!z(D))return;this._docs.push(D),this._myIndex.add(D)}remove(D=()=>!1){let u=[];for(let F=0,C=this._docs.length;F<C;F+=1){let E=this._docs[F];if(D(E,F))this.removeAt(F),F-=1,C-=1,u.push(E)}return u}removeAt(D){this._docs.splice(D,1),this._myIndex.removeAt(D)}getIndex(){return this._myIndex}search(D,{limit:u=-1}={}){let{includeMatches:F,includeScore:C,shouldSort:E,sortFn:B,ignoreFieldNorm:A}=this.options,G=O(D)?O(this._docs[0])?this._searchStringList(D):this._searchObjectList(D):this._searchLogical(D);if(xF(G,{ignoreFieldNorm:A}),E)G.sort(B);if(mD(u)&&u>-1)G=G.slice(0,u);return lF(G,this._docs,{includeMatches:F,includeScore:C})}_searchStringList(D){let u=YD(D,this.options),{records:F}=this._myIndex,C=[];return F.forEach(({v:E,i:B,n:A})=>{if(!z(E))return;let{isMatch:G,score:Y,indices:J}=u.searchIn(E);if(G)C.push({item:E,idx:B,matches:[{score:Y,value:E,norm:A,indices:J}]})}),C}_searchLogical(D){let u=Du(D,this.options),F=(A,G,Y)=>{if(!A.children){let{keyId:U,searcher:Z}=A,Q=this._findMatches({key:this._keyStore.get(U),value:this._myIndex.getValueForItemAtKeyId(G,U),searcher:Z});if(Q&&Q.length)return[{idx:Y,item:G,matches:Q}];return[]}let J=[];for(let U=0,Z=A.children.length;U<Z;U+=1){let Q=A.children[U],w=F(Q,G,Y);if(w.length)J.push(...w);else if(A.operator===r.AND)return[]}return J},C=this._myIndex.records,E={},B=[];return C.forEach(({$:A,i:G})=>{if(z(A)){let Y=F(u,A,G);if(Y.length){if(!E[G])E[G]={idx:G,item:A,matches:[]},B.push(E[G]);Y.forEach(({matches:J})=>{E[G].matches.push(...J)})}}}),B}_searchObjectList(D){let u=YD(D,this.options),{keys:F,records:C}=this._myIndex,E=[];return C.forEach(({$:B,i:A})=>{if(!z(B))return;let G=[];if(F.forEach((Y,J)=>{G.push(...this._findMatches({key:Y,value:B[J],searcher:u}))}),G.length)E.push({idx:A,item:B,matches:G})}),E}_findMatches({key:D,value:u,searcher:F}){if(!z(u))return[];let C=[];if(q(u))u.forEach(({v:E,i:B,n:A})=>{if(!z(E))return;let{isMatch:G,score:Y,indices:J}=F.searchIn(E);if(G)C.push({score:Y,key:D,value:E,idx:B,norm:A,indices:J})});else{let{v:E,n:B}=u,{isMatch:A,score:G,indices:Y}=F.searchIn(E);if(A)C.push({score:G,key:D,value:E,norm:B,indices:Y})}return C}}b.version="7.1.0";b.createIndex=iD;b.parseIndex=IF;b.config=$;b.parseQuery=Du;kF(eD);/*!
 * element-emotes
 * Copyright (C) 2022-present  Michael Serajnik  https://github.com/mserajnik
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */var{Textcomplete:H2}=KD(),{ContenteditableEditor:W2}=cu(),X2=[{class:"mx_BasicMessageComposer_input",requiresManualDeletions:!1},{class:"mx_WysiwygComposer_Editor_content",requiresManualDeletions:!0}],iu,RD,ou,P2=(D)=>{let u=D.split(":").join("");if(V.get("useEmoteFuzzyMatching"))return iu.search(u);u=u.toLowerCase();let F=[];for(let C of RD)if(C.name.toLowerCase().includes(u))F.push({item:C});return F},z2={id:"emote",match:/\B:([-+\w]*)$/,index:1,search:async(D,u,F)=>{u(P2(D))},cache:!1,template:(D)=>`<img src="${D.item.url}?accessKey=${V.get("accessKey")}">&nbsp;<small>${D.item.name}</small>`,replace:(D)=>`:${D.item.name}: `},K2=async(D,u=!1)=>{if(D.dataset.handlingEmoteSuggestions)return;if(D.dataset.handlingEmoteSuggestions=!0,u)D.dataset.requiresManualDeletions=!0;let F=new H2(new W2(D),[z2],ou);new window.MutationObserver((C,E)=>{if(!document.body.contains(D))F.destroy(),E.disconnect()}).observe(document.body,{childList:!0,subtree:!0})},nu=(D)=>{if(D.nodeType!==window.Node.ELEMENT_NODE)return;if(D.classList){for(let u of X2)if(D.classList.contains(u.class)){K2(D,u.requiresManualDeletions);return}}if(D.childNodes)[...D.childNodes].forEach(nu)},au={initialize:()=>{let D=V.get("emoteSuggestionBlacklistedStrings").split("|").map((u)=>u.trim().toLowerCase()).filter((u)=>u!=="");if(RD=V.get("emotes").filter((u)=>{let F=u.name.toLowerCase();for(let C of D)if(F.includes(C))return!1;return!0}),V.get("useEmoteFuzzyMatching"))iu=new b(RD,{keys:["name"],location:V.get("emoteFuzzyMatchingLocation"),distance:V.get("emoteFuzzyMatchingDistance"),threshold:V.get("emoteFuzzyMatchingThreshold")});ou={dropdown:{className:"dropdown-menu textcomplete-dropdown mx_Autocomplete",maxCount:V.get("emoteSuggestionAmount"),placement:"top",header:()=>"",footer:()=>"",rotate:!0,style:{display:"none",position:"absolute",zIndex:"1000"},parent:document.body,item:{className:"textcomplete-item mx_Autocomplete_Completion_pill",activeClassName:"textcomplete-item active mx_Autocomplete_Completion_pill mx_Autocomplete_Completion selected"}}},new window.MutationObserver((u)=>{for(let F of u)for(let C of F.addedNodes)nu(C)}).observe(document.body,{childList:!0,subtree:!0})}};/*!
 * element-emotes
 * Copyright (C) 2022-present  Michael Serajnik  https://github.com/mserajnik
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */var T2=["var(--cpd-color-blue-1200)","var(--cpd-color-fuchsia-1200)","var(--cpd-color-green-1200)","var(--cpd-color-pink-1200)","var(--cpd-color-orange-1200)","var(--cpd-color-cyan-1200)","var(--cpd-color-purple-1200)","var(--cpd-color-lime-1200)"],ru={initialize:()=>{let D=V.get("usernameColors"),u=[];for(let E=0;E<8;E++){if(D[E]!==""&&D[E]!==T2[E]){u.push(D[E]);continue}u.push(null)}if(!u.some((E)=>E!==null))return;let C=document.createElement("style");for(let[E,B]of u.entries()){if(!B)continue;C.innerHTML+=`
        .mx_Username_color${E+1} {
          color: ${B} !important;
        }
      `}document.head.appendChild(C)}};/*!
 * element-emotes
 * Copyright (C) 2022-present  Michael Serajnik  https://github.com/mserajnik
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */var su="mx_QuickSettingsButton",uD,tu=()=>{if(!uD.length)return null;return uD[Math.floor(Math.random()*uD.length)]},eu=(D,u,F)=>{if(D.classList&&D.classList.contains(su)){F.disconnect(),DF(D,u);return}if(D.childNodes)[...D.childNodes].forEach((C)=>{eu(C,u,F)})},DF=(D,u)=>{let F=`
    background-image: url('${u.url}?accessKey=${V.get("accessKey")}');
    background-position: center;
    background-repeat: no-repeat;
    background-size: contain;
    cursor: pointer;
    flex: 0 0 auto;
    margin: 12px auto;
    min-height: 32px;
    min-width: 32px;
  `;D.insertAdjacentHTML("afterend",`<div
      id="element-emotes-status-indicator"
      style="${F}"
      tabindex="0"
      title="${u.name}"
    </div>`);let C=document.getElementById("element-emotes-status-indicator");C.addEventListener("click",()=>{R2(C,tu())})},R2=(D,u)=>{D.style.backgroundImage=`url('${u.url}?accessKey=${V.get("accessKey")}')`,D.title=u.name},uF={initialize:()=>{if(!V.get("displayStatusIndicator"))return;let D=V.get("emoteSuggestionBlacklistedStrings").split("|").map((C)=>C.trim().toLowerCase()).filter((C)=>C!=="");uD=V.get("emotes").filter((C)=>{let E=C.name.toLowerCase();for(let B of D)if(E.includes(B))return!1;return!0});let u=tu();if(!u)return;let F=document.querySelector(`.${su}`);if(F){DF(F,u);return}new window.MutationObserver((C,E)=>{for(let B of C)for(let A of B.addedNodes)eu(A,u,E)}).observe(document.body,{childList:!0,subtree:!0})}};/*!
 * element-emotes
 * Copyright (C) 2022-present  Michael Serajnik  https://github.com/mserajnik
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */(async()=>{try{await V.initialize()}catch(D){window.alert(D);return}gD.initialize(),au.initialize(),ru.initialize(),uF.initialize()})();
